version: "2"

services:
  nginx:
    image: nginx_vts:v2 # ğŸ‘‰ ä½ æ„å»ºé•œåƒæ—¶ä½¿ç”¨çš„åç§°ï¼Œå¿…è¦æ—¶æ›¿æ¢
    container_name: nginx_vts
    ports:
      - "80:80"       # HTTP ç«¯å£
      - "443:443"     # HTTPS ç«¯å£ï¼ˆå¦‚æœªå¯ç”¨å¯ç§»é™¤ï¼‰
      - "18989:18989" # VTS /status é¡µé¢
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro         # ä¸»é…ç½®æ–‡ä»¶ï¼ˆå·²è¦†ç›–é•œåƒå†…é»˜è®¤ï¼‰
      - ./conf.d:/etc/nginx/conf.d:ro                 # è™šæ‹Ÿä¸»æœºé…ç½®
      - ./stream.d:/etc/nginx/stream.d:ro             # TCP é…ç½®
      - ./geoip:/opt/nginx/geoip:ro                   # GeoIP2 æ•°æ®æŒ‚è½½è·¯å¾„
      - ./letsencrypt:/etc/letsencrypt:ro             # å¦‚éœ€æ”¯æŒ HTTPS è¯ä¹¦
      - ./logs:/opt/nginx/logs                        # æ—¥å¿—æŒ‚è½½
    networks:
      - nginx_net
    restart: always

networks:
  nginx_net:
    driver: bridge

